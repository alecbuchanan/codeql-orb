description: >
  Uploads CodeQL analysis results to GitHub, differentiating between pull request and branch builds.

steps:
  - run:
      name: "Extract Repository Information"
      command: <<include(scripts/parse_repository.sh)>>
  - when:
      condition: ${CIRCLE_PULL_REQUEST}
      steps:
        - run:
            name: "Upload CodeQL Results for PR"
            command: <<include(scripts/upload_pr.sh)>>

  - unless:
      condition: ${CIRCLE_PULL_REQUEST}
      steps:
        - run:
            name: "Upload CodeQL Results for Branch"
            command: <<include(scripts/upload_branch.sh)>>
